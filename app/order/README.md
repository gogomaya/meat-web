## DOING
- TODO: 배송후 > 주문 취소 
    - 1안 : 전화문의만, 사장님이 계좌환불
    - 2안 : 주문상태 변경, 토스 결제 취소 안하고, 취소내역만 등록 후
            관리자에서 환불 승인 시, 취소 내역 완료처리, 토스 결제 취소 요청
    - 3안 : 로젠택배 반품 방법 안내? 환불계좌(번호/은행) 입력
- TODO: 마이페이지>주문상세>장바구니 연결
- TODO: 토스 결제 승인
    - TODO: 결제 실패 시, 로직
        - "결제를 실패하였습니다" redirect
    - TODO: 결제 성공 시, 로직
        - 결제 승인 확인하고 상태를 paid
        - 결제 승인 응답이 DONE 이 아니면, 주문 상태 및 결제 상태를 pending

-----------------------------------------------------------------------------------------
## COMPLETE
- ✅ 카트 수정 - 삭제 시 재계산
- ✅ : 👩‍💼 회원가입 유도 체크 
- ✅: 토스 결제 취소
- ✅: 환불
- ✅: 주문 취소
    - ✅ 마이페이지 > 취소 > 목록
    - ✅ 마이페이지 > 취소 > 상세
    - ✅ 마이페이지 > 취소 > 삭제
    - ✅ type, service, api 
- 🗑 주문삭제
- 할인가(dicount_price) 적용
- 주문 제목 "OOO 외 (length-1)건"
- 비회원 주문 버튼 연결
    - ✅:장바구니 > 주문하기 (전체)
    - ✅:장바구니 > 선택상품 결제
    - ✅: 상품상세 > 알림 > 예 (장바구니 포함 주문)
- 비회원 주문
    - /guest/order
- 주문/결제 완료 후, 장바구니 비우기?
    - 1안) 전체 비우기
    - 2안) 주문된 상품만 비우기 ✅
        - 시점
            - 주문 등록?
            - 결제 완료? ✅ 
- ✅: 주문목록 및 찜 리스트에서 상품 이미지 클릭시 상품 상세 페이지로 이동 고려
- ✅: 배송지 관리 - 주소 API
- ✅: 주문목록에서 장바구니 연결
    - 장바구니 및 이미지 클릭시 'SW' 로 주문항목 리스트와 장바구니 아이콘 출력
    - 여기서 항목별로 장바구니 추가 가능
- ✅: 주문 목록에서 썸네일 이미지
    - 첫번째 주문 항목의 상품 이미지로 
- ✅: 찜리스트에서 장바구니 담기
- ✅: 장바구니 선택 상품만 주문

-----------------------------------------------------------------------------------------

TODO:
## 정리
- 주문서 작성에서 배송 정보 추가 작성 고려
- 결제 할때 , 계좌이체/체크카드 결제 시 현금 영수 정보 토스에서 입력받는지 확인
    - 토스에서 입력 받으면, 결제 수단 데이터 따로 관리 필요 없음
- 관리자가 상품 등록 시, 상품정보와 할인 금액 같이 입력

## ✅ 정해진 내용
- 배송비는? 
    - 1안) 여러 개 주문 시, 가장 큰 배송비로
    - 2안) 여러 개 주문 시, 누적 배송비로
    - 3안) 배송비는 주문 별로 (총배송비 테이블 따로 관리) ✅
        - ⭐할인가 기준 15만원이상 무료배송, 건당 5,000원  





----------------------------------------------------
## 토스 페이먼츠 SDK 설치
```
    npm install @tosspayments/payment-widget-sdk
```


## 주문 하기
- [주문하기], [구매하기] 버튼 클릭
- 아래와 같이 경로 이동
http://localhost:3000/order?productPks=1,2,3&quantityList=5,5,5
- 주문 등록 처리
- ➡ redirect:/order/{order_pk}

### 단일 주문의 경우
```
    <Link href={`/order?productPks=${product_pk}&quantityList=1`}>주문하기</Link>
```